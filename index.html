<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Jaan ‚ù§Ô∏è</title>
    <style>
        :root {
            --pink: #ff5fa8;
            --deep: #ff2f86;
            --bg: #050507;
            --glow: 0 0 80px rgba(255, 95, 168, 0.75);
            --font: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; width: 100%; font-family: var(--font); background: var(--bg); color: #fff; overflow: hidden; }

        /* --- Screen & Layout --- */
        .screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s, visibility 0.5s;
        }
        .screen.visible { opacity: 1; visibility: visible; z-index: 10; }
        .background { position: fixed; inset: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1; filter: brightness(0.6); }
        .pink-overlay { background: rgba(255, 95, 168, 0.15); }

        /* --- Start Screen --- */
        #startScreen h1 { font-size: 28px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .heart {
            font-size: 100px;
            text-shadow: var(--glow);
            user-select: none;
            cursor: pointer;
            transition: transform 0.3s ease;
            animation: beat 1.3s ease-in-out infinite;
        }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }
        .input-field { display: flex; gap: 10px; margin-top: 20px; }
        input[type="text"] {
            padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.3);
            background: rgba(0,0,0,0.4); color: #fff; font-size: 16px;
        }
        .btn {
            padding: 12px 20px; border-radius: 12px; border: none; cursor: pointer;
            font-weight: bold; font-size: 16px; background: var(--pink); color: #1a000a;
        }
        #playfulMessage { margin-top: 15px; min-height: 24px; font-size: 18px; color: #ffdbe9; }
        #giantYesBtn {
            position: fixed;
            inset: 0;
            margin: auto;
            width: 90vw;
            height: 30vh;
            max-width: 500px;
            max-height: 200px;
            background: linear-gradient(180deg, var(--pink), var(--deep));
            color: #1a000a;
            font-size: clamp(40px, 10vw, 80px);
            font-weight: 900;
            border-radius: 30px;
            box-shadow: var(--glow);
            border: none;
            cursor: pointer;
            z-index: 20;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.5);
            transition: all 0.4s ease;
            animation: bob 1.5s ease-in-out infinite;
        }
        #giantYesBtn.visible { opacity: 1; visibility: visible; transform: scale(1); }
        @keyframes bob { 0%, 100% { transform: scale(1) translateY(0); } 50% { transform: scale(1.05) translateY(-10px); } }

        /* --- Quiz Screen --- */
        #quizScreen h2 { font-size: 32px; margin-bottom: 20px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .options-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            max-width: 800px;
        }
        .option {
            padding: 10px 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            cursor: pointer;
            transition: all 0.2s;
        }
        .option.selected { background: #2ecc71; border-color: #2ecc71; color: #fff; transform: scale(1.05); }
        .option.fading { opacity: 0; transform: scale(0.8); }

        /* --- Choice (Teddy) Screen --- */
        #choiceScreen h2 { font-size: 32px; margin-bottom: 20px; }
        .choice-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-width: 900px; }
        .tile {
            border-radius: 15px; overflow: hidden; border: 2px solid transparent;
            cursor: pointer; position: relative; transition: transform 0.2s;
        }
        .tile:hover { transform: scale(1.03); }
        .tile img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .tile.shake { animation: shake 0.4s; }
        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-8px)} 75%{transform:translateX(8px)} }

        /* --- Final Screen --- */
        .final-container { position: relative; width: 100%; height: 100%; }
        #teddy {
            position: absolute;
            bottom: 5vh;
            left: -30vw; /* Start off-screen */
            width: 150px;
            transition: left 1.5s ease-in-out, transform 0.5s ease;
            z-index: 12;
        }
        #rose {
            position: absolute;
            bottom: 10vh;
            left: 50%;
            width: 100px;
            transform: translate(-50%, 20px);
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            transition-delay: 2s; /* Delay until teddy is in place */
            z-index: 11;
        }
        #finalMessage {
            font-size: clamp(30px, 6vw, 50px);
            color: var(--pink);
            text-shadow: var(--glow);
        }
    </style>
</head>
<body>

    <audio id="bgMusic" src="ava_ja.mp3" loop></audio>

    <section id="startScreen" class="screen">
        <img src="ava.jpg" alt="Background" class="background">
        <h1>Jaan ho na aap meri?</h1>
        <div id="heart" class="heart">‚ù§Ô∏è</div>
        <div class="input-field">
            <input type="text" id="startInput" placeholder="Haan bolo na...">
            <button id="startBtn" class="btn">Submit</button>
        </div>
        <p id="playfulMessage"></p>
        <button id="giantYesBtn">YES!</button>
    </section>

    <section id="quizScreen" class="screen">
        <div class="background pink-overlay"></div>
        <img src="ava.jpg" alt="Background" class="background">
        <h2>Why you are marrying me?</h2>
        <div id="optionsContainer" class="options-grid"></div>
    </section>

    <section id="choiceScreen" class="screen">
        <img src="bva.jpg" alt="Background" class="background">
        <h2>Numan should marry whom in this world competition?</h2>
        <div id="choiceGrid" class="choice-grid"></div>
    </section>

    <section id="finalScreen" class="screen">
        <img src="bva.jpg" alt="Background" class="background">
        <div class="final-container">
            <h1 id="finalMessage"></h1>
            <img id="teddy" src="teddy.png" alt="Teddy Bear">
            <img id="rose" src="rose.png" alt="Rose">
        </div>
    </section>

<script>
    // --- DOM ELEMENTS ---
    const allScreens = document.querySelectorAll('.screen');
    const startScreen = document.getElementById('startScreen');
    const quizScreen = document.getElementById('quizScreen');
    const choiceScreen = document.getElementById('choiceScreen');
    const finalScreen = document.getElementById('finalScreen');

    const bgMusic = document.getElementById('bgMusic');
    const startInput = document.getElementById('startInput');
    const startBtn = document.getElementById('startBtn');
    const heart = document.getElementById('heart');
    const playfulMessage = document.getElementById('playfulMessage');
    const giantYesBtn = document.getElementById('giantYesBtn');

    const optionsContainer = document.getElementById('optionsContainer');
    const choiceGrid = document.getElementById('choiceGrid');
    const finalMessage = document.getElementById('finalMessage');
    const teddy = document.getElementById('teddy');
    const rose = document.getElementById('rose');

    // --- STATE & CONFIG ---
    let resistCount = 0;
    const YES_WORDS = ['yes', 'ha', 'haan', 'han', 'hn', 'hnn', 'haaa', 'y'];
    const PLAYFUL_MESSAGES = ["What?", "Why üò¢", "I thought you loved me ;("];

    // --- MUSIC ---
    const startMusic = () => {
        bgMusic.volume = 0.4;
        bgMusic.play().catch(error => console.log("User interaction needed for audio."));
    };
    document.body.addEventListener('pointerdown', startMusic, { once: true });

    // --- SCREEN MANAGEMENT ---
    const showScreen = (screen) => {
        allScreens.forEach(s => s.classList.remove('visible'));
        screen.classList.add('visible');
    };

    // --- FLOW 1: START SCREEN ---
    const handleYes = () => {
        playfulMessage.textContent = "";
        giantYesBtn.classList.remove('visible');
        showScreen(quizScreen);
        buildQuiz();
    };

    const handleNo = () => {
        resistCount++;
        playfulMessage.textContent = PLAYFUL_MESSAGES[resistCount % PLAYFUL_MESSAGES.length];
        
        // Dodge heart
        const x = (Math.random() - 0.5) * 100;
        const y = (Math.random() - 0.5) * 50;
        heart.style.transform = `translate(${x}px, ${y}px)`;

        if (resistCount >= 3) {
            giantYesBtn.classList.add('visible');
        }
    };

    startBtn.addEventListener('click', () => {
        const answer = startInput.value.trim().toLowerCase();
        if (YES_WORDS.includes(answer)) {
            handleYes();
        } else {
            handleNo();
        }
    });
    
    startInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') startBtn.click();
    });

    giantYesBtn.addEventListener('click', handleYes);

    // --- FLOW 2: QUIZ SCREEN ---
    const POSITIVES = ['My smile üíï', 'My kindness ‚ú®', 'My magic with food üç≤', 'My caring heart üíó', 'My intelligence üß†', 'My look üòç', 'My laughter üé∂', 'Your patience üåπ', 'The way I love youüíû'];
    const NEGATIVES = ['Your pets üêü', 'Being lazy üõãÔ∏è', 'Mood swings üå©Ô∏è', 'Overthinking ü§Ø', 'Getting angry üò†', 'Forgetfulness üòÖ'];
    let selectedPositives = 0;

    const buildQuiz = () => {
        selectedPositives = 0;
        optionsContainer.innerHTML = '';
        const allOptions = [
            ...POSITIVES.map(text => ({ text, isPositive: true })),
            ...NEGATIVES.map(text => ({ text, isPositive: false }))
        ].sort(() => Math.random() - 0.5);

        allOptions.forEach(opt => {
            const optionEl = document.createElement('div');
            optionEl.className = 'option';
            optionEl.textContent = opt.text;
            optionEl.addEventListener('click', () => {
                if (opt.isPositive) {
                    if (!optionEl.classList.contains('selected')) {
                        optionEl.classList.add('selected');
                        selectedPositives++;
                        if (selectedPositives === POSITIVES.length) {
                            setTimeout(() => {
                                showScreen(choiceScreen);
                                buildChoice();
                            }, 500);
                        }
                    }
                } else {
                    optionEl.textContent = Math.random() > 0.5 ? 'Whoops üòú' : 'Nope ‚ùå';
                    optionEl.classList.add('fading');
                    optionEl.style.pointerEvents = 'none';
                }
            });
            optionsContainer.appendChild(optionEl);
        });
    };

    // --- FLOW 3: CHOICE SCREEN ---
    const buildChoice = () => {
        choiceGrid.innerHTML = '';
        const choices = [
            { src: 'bva.png', isCorrect: true }, // Ensure you have bva.png or change to .jpg
            { src: 'duck.png', isCorrect: false },
            { src: 'gulzar.png', isCorrect: false },
            { src: 'gabbar.png', isCorrect: false },
            { src: 'anjana.png', isCorrect: false },
            { src: 'cat.png', isCorrect: false }
        ].sort(() => Math.random() - 0.5);

        choices.forEach(choice => {
            const tileEl = document.createElement('div');
            tileEl.className = 'tile';
            const imgEl = document.createElement('img');
            imgEl.src = choice.src;
            tileEl.appendChild(imgEl);

            tileEl.addEventListener('click', () => {
                if (choice.isCorrect) {
                    setTimeout(() => {
                        showScreen(finalScreen);
                        runFinalAnimation();
                    }, 300);
                } else {
                    tileEl.classList.add('shake');
                    setTimeout(() => tileEl.classList.remove('shake'), 400);
                }
            });
            choiceGrid.appendChild(tileEl);
        });
    };

    // --- FLOW 4: FINAL SCREEN ---
    const typeWriter = (text) => {
        let i = 0;
        finalMessage.innerHTML = '';
        const typing = setInterval(() => {
            if (i < text.length) {
                finalMessage.innerHTML += text.charAt(i);
                i++;
            } else {
                clearInterval(typing);
            }
        }, 80);
    };
    
    const runFinalAnimation = () => {
        // 1. Teddy walks in
        setTimeout(() => {
            teddy.style.left = '50%';
            teddy.style.transform = 'translateX(-50%)';
        }, 100);

        // 2. Teddy bows and rose appears after walk
        setTimeout(() => {
            teddy.style.transform = 'translateX(-50%) rotate(15deg)';
            rose.style.opacity = '1';
            rose.style.transform = 'translate(-50%, 0)';
        }, 1800);
        
        // 3. Typewriter starts
        setTimeout(() => {
            typeWriter("Always yours & I Love You Forever üíñ ‚Äì Numan");
        }, 2200);
    };

    // --- INITIALIZE ---
    showScreen(startScreen);
</script>
</body>
</html>
